(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d1f7739"],{"4a33":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container"},[t._m(0),a("h1",[t._v("登入 Alphitter")]),a("form",{staticClass:"w-100",on:{submit:function(s){return s.preventDefault(),s.stopPropagation(),t.handleSubmit.apply(null,arguments)}}},[a("div",{class:["form-label-group",{"wrong-form":t.isWronging}]},[a("label",{attrs:{for:"name"}},[t._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",name:"account",type:"text",required:"",autofocus:""},domProps:{value:t.account},on:{input:function(s){s.target.composing||(t.account=s.target.value)}}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.isWronging,expression:"isWronging"}],staticClass:"wrong-message"},[t._v("帳號不存在")])]),a("div",{class:["form-label-group",{"wrong-form":t.isWronging}]},[a("label",{attrs:{for:"password"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",autocomplete:"new-password",required:""},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})]),a("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3",attrs:{type:"submit"}},[t._v(" 登入 ")]),a("div",{staticClass:"text-link text-center"},[a("p",[a("router-link",{staticClass:"regist",attrs:{to:"/regist"}},[t._v(" 註冊 Alphitter ")])],1),a("p",[t._v("‧")]),a("p",[a("router-link",{staticClass:"admin-login",attrs:{to:"/admin"}},[t._v(" 後台登入 ")])],1)])])])},r=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"logo"},[a("img",{staticClass:"logo-img",attrs:{src:"https://upload.cc/i1/2022/05/10/LycK2A.png",alt:"AC-logo"}})])}],n=a("1da1"),o=(a("96cf"),a("d9e2"),a("7696")),c=a("2fa3"),i={data:function(){return{account:"",password:"",isProcessing:!1,isWronging:!1}},methods:{handleSubmit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,e,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,t.account&&t.password){s.next=4;break}return c["a"].fire({icon:"warning",title:"請填入 account 和 password"}),s.abrupt("return");case 4:return t.isProcessing=!0,s.next=7,o["a"].signIn({account:t.account,password:t.password});case 7:if(a=s.sent,e=a.data,r=a.statusText,console.log(e.data),"OK"===r&&"success"===e.status){s.next=12;break}throw new Error(r);case 12:localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.user.id),t.$store.commit("setCurrentUser",e.data.user),t.$router.push("/main"),s.next=24;break;case 18:s.prev=18,s.t0=s["catch"](0),t.password="",console.log(s.t0),t.isProcessing=!1,c["a"].fire({icon:"error",title:"帳號不存在或密碼錯誤，請重新輸入"});case 24:case"end":return s.stop()}}),s,null,[[0,18]])})))()}}},u=i,l=(a("d98c"),a("2877")),d=Object(l["a"])(u,e,r,!1,null,"8dfcc4ca",null);s["default"]=d.exports},7696:function(t,s,a){"use strict";a("b0c0");var e=a("2fa3");s["a"]={signIn:function(t){var s=t.account,a=t.password;return e["b"].post("/login",{account:s,password:a})},regist:function(t){var s=t.account,a=t.name,r=t.email,n=t.password,o=t.checkPassword;return e["b"].post("/users",{account:s,name:a,email:r,password:n,checkPassword:o})},AdminSignin:function(t){var s=t.account,a=t.password;return e["b"].post("/admin/login",{account:s,password:a})}}},d13e:function(t,s,a){},d98c:function(t,s,a){"use strict";a("d13e")}}]);
//# sourceMappingURL=chunk-0d1f7739.905c8837.js.map